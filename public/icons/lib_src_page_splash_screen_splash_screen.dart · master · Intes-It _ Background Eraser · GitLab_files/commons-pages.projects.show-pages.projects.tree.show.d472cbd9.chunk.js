(this.webpackJsonp=this.webpackJsonp||[]).push([[257],{"+/NG":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));n("JHu5"),n("3R5X"),n("XUYm");var i=n("yYHy");const a=function(e,t){document.querySelectorAll(e).forEach((function(e){return e.classList.toggle("hidden",!t)}))},r=function(e,t,n){const a=document.querySelector(e);a&&(a.action=Object(i.y)(t,n))}},"34cr":function(e,t,n){"use strict";var i=n("ly/8"),a=n("cuRJ"),r=n("6IRw"),o=n.n(r);const s={components:{GlButton:a.a},directives:{GlTooltip:i.a},props:{title:{type:String,required:!1,default:"Clear"},tooltipContainer:{required:!1,default:!1,validator:e=>!1===e||"string"==typeof e||e instanceof HTMLElement}}};const l=o()({render:function(){var e=this.$createElement;return(this._self._c||e)("gl-button",this._g({directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.hover",value:{container:this.tooltipContainer},expression:"{ container: tooltipContainer }",modifiers:{hover:!0}}],staticClass:"gl-clear-icon-button",attrs:{variant:"default",category:"tertiary",size:"small",name:"clear",icon:"clear",title:this.title,"aria-label":this.title}},this.$listeners))},staticRenderFns:[]},void 0,s,void 0,!1,void 0,!1,void 0,void 0,void 0);t.a=l},"6HTq":function(e,t,n){"use strict";var i=n("34cr"),a=n("tSMP"),r=n("H8gz"),o=n("zLBL"),s=n("6IRw"),l=n.n(s);const d={components:{GlClearIconButton:i.a,GlIcon:r.a,GlFormInput:a.a,GlLoadingIcon:o.a},inheritAttrs:!1,model:{prop:"value",event:"input"},props:{value:{type:String,required:!1,default:""},borderless:{type:Boolean,required:!1,default:!1},clearButtonTitle:{type:String,required:!1,default:"Clear"},disabled:{type:Boolean,required:!1,default:!1},isLoading:{type:Boolean,required:!1,default:!1},tooltipContainer:{required:!1,default:!1,validator:e=>!1===e||"string"==typeof e||e instanceof HTMLElement}},computed:{inputAttributes(){const e={type:"search",placeholder:"Search",...this.$attrs};return e["aria-label"]||(e["aria-label"]=e.placeholder),e},hasValue(){return Boolean(this.value.length)},inputListeners(){return{...this.$listeners,input:this.onInput,focusin:this.onFocusin,focusout:this.onFocusout}},showClearButton(){return this.hasValue&&!this.disabled}},methods:{isInputOrClearButton(e){var t,n;return e===(null===(t=this.$refs.input)||void 0===t?void 0:t.$el)||e===(null===(n=this.$refs.clearButton)||void 0===n?void 0:n.$el)},clearInput(){this.onInput(""),this.focusInput()},focusInput(){this.$refs.input.$el.focus()},onInput(e){this.$emit("input",e)},onFocusout(e){const{relatedTarget:t}=e;this.isInputOrClearButton(t)||this.$emit("focusout",e)},onFocusin(e){const{relatedTarget:t}=e;this.isInputOrClearButton(t)||this.$emit("focusin",e)}}};const c=l()({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"gl-search-box-by-type"},[n("gl-icon",{staticClass:"gl-search-box-by-type-search-icon",attrs:{name:"search"}}),e._v(" "),n("gl-form-input",e._g(e._b({ref:"input",class:{"gl-search-box-by-type-input":!e.borderless,"gl-search-box-by-type-input-borderless":e.borderless},attrs:{value:e.value,disabled:e.disabled}},"gl-form-input",e.inputAttributes,!1),e.inputListeners)),e._v(" "),e.isLoading||e.showClearButton?n("div",{staticClass:"gl-search-box-by-type-right-icons"},[e.isLoading?n("gl-loading-icon",{staticClass:"gl-search-box-by-type-loading-icon"}):e._e(),e._v(" "),e.showClearButton?n("gl-clear-icon-button",{ref:"clearButton",staticClass:"gl-search-box-by-type-clear gl-clear-icon-button",attrs:{title:e.clearButtonTitle,"tooltip-container":e.tooltipContainer},on:{click:function(t){return t.stopPropagation(),e.clearInput.apply(null,arguments)},focusin:e.onFocusin,focusout:e.onFocusout}}):e._e()],1):e._e()],1)},staticRenderFns:[]},void 0,d,void 0,!1,void 0,!1,void 0,void 0,void 0);t.a=c},"6Y0j":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getReadme"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"url"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"readme"},arguments:[{kind:"Argument",name:{kind:"Name",value:"url"},value:{kind:"Variable",name:{kind:"Name",value:"url"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"html"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:78}};n.loc.source={body:"query getReadme($url: String!) {\n  readme(url: $url) @client {\n    html\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.getReadme=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"getReadme")},BLrG:function(e,t,n){"use strict";var i=n("U1Ws");t.a={methods:{timeFormatted:e=>Object(i.E)().format(e,i.gb),tooltipTitle:e=>Object(i.q)(e)}}},Hoxe:function(e,t,n){var i=n("MfoV"),a=/[\\^$.*+?()[\]{}|]/g,r=RegExp(a.source);e.exports=function(e){return(e=i(e))&&r.test(e)?e.replace(a,"\\$&"):e}},LcVr:function(e,t,n){"use strict";var i=n("ly/8"),a=n("BLrG"),r=(n("U1Ws"),{directives:{GlTooltip:i.a},mixins:[a.a],props:{time:{type:[String,Number],required:!0},tooltipPlacement:{type:String,required:!1,default:"top"},cssClass:{type:String,required:!1,default:""}},computed:{timeAgo(){return this.timeFormatted(this.time)}}}),o=n("bPvS"),s=Object(o.a)(r,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("time",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.viewport",value:{placement:e.tooltipPlacement},expression:"{ placement: tooltipPlacement }",modifiers:{viewport:!0}}],class:e.cssClass,attrs:{title:e.tooltipTitle(e.time),datetime:e.time}},[e._t("default",(function(){return[e._v(e._s(e.timeAgo))]}),{timeAgo:e.timeAgo})],2)}),[],!1,null,null,null);t.a=s.exports},M96W:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getProjectPath"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"projectPath"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}]}]}}],loc:{start:0,end:47}};n.loc.source={body:"query getProjectPath {\n  projectPath @client\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.getProjectPath=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"getProjectPath")},TIcb:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("uHfJ"),n("R0RX");var i=n("yYHy");function a(e,t){return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};return e.map((function(e){return{sha:e.commit.id,message:e.commit.message,titleHtml:e.commit_title_html,committedDate:e.commit.committed_date,commitPath:e.commit_path,fileName:e.file_name,filePath:Object(i.y)(t,e.file_name),__typename:"LogTreeCommit",...n(e)}}))}(e,t,(function(e){return{lockLabel:e.lock_label||!1}}))}},ZSrL:function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var a=(o=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),r=i.sources.map((function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"}));return[n].concat(r).concat([a]).join("\n")}var o;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},a=0;a<this.length;a++){var r=this[a][0];null!=r&&(i[r]=!0)}for(a=0;a<e.length;a++){var o=e[a];null!=o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},bMec:function(e,t,n){"use strict";n.d(t,"a",(function(){return he}));var i=n("Hoxe"),a=n.n(i),r=(n("h8Et"),n("q+nE")),o=n("rP6D"),s=n("yYHy"),l=(n("JHu5"),n("3R5X"),n("XUYm"),n("+tbm")),d=n("G00o"),c={components:{BlobContentViewer:l.a},beforeRouteEnter(e,t,n){n((function(e){let{$options:t}=e;t.limitedContainerElements.forEach((function(e){return e.classList.remove(d.j)}))}))},beforeRouteLeave(e,t,n){this.$options.limitedContainerElements.forEach((function(e){return e.classList.add(d.j)})),n()},props:{path:{type:String,required:!0},projectPath:{type:String,required:!0}},limitedContainerElements:document.querySelectorAll("."+d.j)},u=n("bPvS"),m=Object(u.a)(c,(function(){var e=this.$createElement;return(this._self._c||e)("blob-content-viewer",{attrs:{path:this.path,"project-path":this.projectPath}})}),[],!1,null,null,null).exports,p=n("+/NG"),h=(n("0no1"),n("gdbl"),n("WmlO"),n("W9Nl"),n("hyA4")),f=n.n(h),v=n("teVv"),g=n("Zxcm"),b=n("e9rI"),k=n("M96W"),y=n.n(k);const _=["index","readme"],S=["ad","adoc","asciidoc","creole","markdown","md","mdown","mediawiki","mkd","mkdn","org","rdoc","rst","textile","wiki"],w=function(e){return new RegExp(`^(${_.join("|")})\\.(${S.join("|")})$`,"i").test(e.name)},N=function(e){return new RegExp(`^(${_.join("|")})(\\.txt)?$`,"i").test(e.name)};var j=n("mphk"),P=n("TIcb");let C=[],E=[];const x=function(e){return C.includes(e)},F=function(){C=[],E=[]},O=async function(e,t,n,i){if(x(i))return[];Array.from(Array(d.a)).forEach((function(e,t){return function(e){x(e)||e<0||C.push(e)}(i+t)}));return await function(e,t,n,i){if(E.includes(i)||i<0)return[];E.push(i);const a=Object(s.y)(gon.relative_url_root||"/",e,"/-/refs/",encodeURIComponent(n),"/logs_tree/",encodeURIComponent(function(e){return e.replace(/^\//,"")}(t)));return j.a.get(a,{params:{format:"json",offset:i}}).then((function(e){let{data:n}=e;return Object(P.a)(n,t)})).catch((function(){return Object(v.createAlert)({message:d.g})}))}(e,t,n,i)};var L=n("H8gz"),$=n("u1ru"),T=n("zLBL"),R=n("JmT7"),q=n("oj/M"),D=n("Skdl"),I=n("6Y0j"),A={apollo:{readme:{query:n.n(I).a,variables(){return{url:this.blob.webPath}}}},components:{GlIcon:L.a,GlLink:$.a,GlLoadingIcon:T.a},directives:{SafeHtml:R.a},props:{blob:{type:Object,required:!0}},data:()=>({readme:null}),computed:{isLoading(){return this.$apollo.queries.readme.loading}},watch:{readme(e){var t=this;e&&this.$nextTick((function(){Object(q.r)(),Object(D.a)(t.$refs.readme)}))}},safeHtmlConfig:{ADD_TAGS:["copy-code"]}},B=Object(u.a)(A,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{staticClass:"file-holder limited-width-container readme-holder"},[n("div",{staticClass:"js-file-title file-title-flex-parent"},[n("div",{staticClass:"file-header-content"},[n("gl-icon",{attrs:{name:"doc-text"}}),e._v(" "),n("gl-link",{attrs:{href:e.blob.webPath}},[n("strong",[e._v(e._s(e.blob.name))])])],1)]),e._v(" "),n("div",{staticClass:"blob-viewer",attrs:{"data-qa-selector":"blob_viewer_content",itemprop:"about"}},[e.isLoading?n("gl-loading-icon",{staticClass:"my-4 mx-auto",attrs:{size:"lg",color:"dark"}}):e.readme?n("div",{directives:[{name:"safe-html",rawName:"v-safe-html:[$options.safeHtmlConfig]",value:e.readme.html,expression:"readme.html",arg:e.$options.safeHtmlConfig}],ref:"readme"}):e._e()],1)])}),[],!1,null,null,null).exports,G=n("Fj12"),U=n("cuRJ"),M=n("t9l/"),H=Object(u.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",{attrs:{id:"name",scope:"col"}},[e._v(e._s(e.s__("ProjectFileTree|Name")))]),e._v(" "),n("th",{staticClass:"d-none d-sm-table-cell",attrs:{id:"last-commit",scope:"col"}},[e._v(e._s(e.__("Last commit")))]),e._v(" "),n("th",{staticClass:"text-right",attrs:{id:"last-update",scope:"col"}},[e._v(e._s(e.__("Last update")))])])])}),[],!1,null,null,null).exports,V=(n("uHfJ"),n("R0RX"),n("ly/8")),z={components:{GlLoadingIcon:T.a},directives:{GlTooltip:V.a},props:{commitRef:{type:String,required:!0},path:{type:String,required:!0},loadingPath:{type:String,required:!1,default:null}},computed:{parentPath(){const e=this.path.split("/");return e.pop(),e.map((function(e){return encodeURIComponent(e)})).join("/")},parentRoute(){return{path:`/-/tree/${this.commitRef}/${this.parentPath}`}}},methods:{clickRow(){this.$router.push(this.parentRoute)}}},J=Object(u.a)(z,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",{staticClass:"tree-item"},[n("td",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.left.viewport",modifiers:{left:!0,viewport:!0}}],staticClass:"tree-item-file-name",attrs:{title:e.__("Go to parent directory"),colspan:"3"},on:{click:function(t){return t.target!==t.currentTarget?null:e.clickRow.apply(null,arguments)}}},[e.parentPath===e.loadingPath?n("gl-loading-icon",{staticClass:"d-inline-block align-text-bottom",attrs:{size:"sm",inline:""}}):n("router-link",{attrs:{to:e.parentRoute,"aria-label":e.__("Go to parent")}},[e._v(" .. ")])],1)])}),[],!1,null,null,null).exports,Q=n("F+K/"),W=n("JBkr"),Y=n("vZRN"),X=n.n(Y);let Z,K;const ee={bind:(e,t)=>{let{value:n}=t;if(!X()(n))throw TypeError("Directive value must be a function");const i=()=>{Z&&(clearTimeout(Z),Z=void 0)};K=()=>{e.addEventListener("mouseout",i,{passive:!0}),Z=setTimeout(()=>{n(e),e.removeEventListener("mouseover",K,!0),e.removeEventListener("mouseout",i),Z=void 0},100)},e.addEventListener("mouseover",K,{capture:!0,passive:!0})},unbind:e=>{e.removeEventListener("mouseover",K,!0)}};var te=n("qn5R"),ne=n("LcVr"),ie=n("7VWA"),ae=n.n(ie),re={components:{GlBadge:Q.a,GlLink:$.a,GlSkeletonLoader:G.a,GlLoadingIcon:T.a,GlIcon:L.a,TimeagoTooltip:ne.a,FileIcon:te.a,GlIntersectionObserver:W.a},directives:{GlTooltip:V.a,GlHoverLoad:ee,SafeHtml:R.a},mixins:[b.a,Object(g.a)()],props:{commitInfo:{type:Object,required:!1,default:null},rowNumber:{type:Number,required:!1,default:null},totalEntries:{type:Number,required:!0},id:{type:String,required:!0},sha:{type:String,required:!0},projectPath:{type:String,required:!0},currentPath:{type:String,required:!0},name:{type:String,required:!0},path:{type:String,required:!0},mode:{type:String,required:!1,default:""},type:{type:String,required:!0},url:{type:String,required:!1,default:null},lfsOid:{type:String,required:!1,default:null},submoduleTreeUrl:{type:String,required:!1,default:null},loadingPath:{type:String,required:!1,default:""}},data:()=>({hasRowAppeared:!1,delayedRowAppear:null}),computed:{commitData(){return this.commitInfo},routerLinkTo(){const e={path:`/-/blob/${this.escapedRef}/${Object(s.i)(this.path)}`},t={path:`/-/tree/${this.escapedRef}/${Object(s.i)(this.path)}`};return this.isBlob?e:this.isFolder?t:null},isBlob(){return"blob"===this.type},isFolder(){return"tree"===this.type},isSubmodule(){return"commit"===this.type},linkComponent(){return this.isFolder||this.isBlob?"router-link":"a"},fullPath(){return this.path.replace(new RegExp(`^${a()(this.currentPath)}/`),"")},shortSha(){return this.sha.slice(0,8)},hasLockLabel(){return this.commitData&&this.commitData.lockLabel},showSkeletonLoader(){return!this.commitData&&this.hasRowAppeared}},methods:{handlePreload(){return this.isFolder?this.loadFolder():this.loadBlob()},loadFolder(){this.apolloQuery(f.a,{projectPath:this.projectPath,ref:this.ref,path:this.path,nextPageCursor:"",pageSize:d.u})},loadBlob(){this.apolloQuery(ae.a,{projectPath:this.projectPath,filePath:this.path,ref:this.ref,shouldFetchRawText:Boolean(this.glFeatures.highlightJs)})},apolloQuery(e,t){this.$apollo.query({query:e,variables:t})},rowAppeared(){var e=this;this.hasRowAppeared=!0,this.commitInfo||(this.delayedRowAppear=setTimeout((function(){return e.$emit("row-appear",e.rowNumber)}),d.n))},rowDisappeared(){clearTimeout(this.delayedRowAppear),this.hasRowAppeared=!1}},safeHtmlConfig:{ADD_TAGS:["gl-emoji"]}},oe=Object(u.a)(re,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",{staticClass:"tree-item"},[n("td",{staticClass:"tree-item-file-name cursor-default position-relative"},[n(e.linkComponent,{directives:[{name:"gl-hover-load",rawName:"v-gl-hover-load",value:e.handlePreload,expression:"handlePreload"},{name:"gl-tooltip",rawName:"v-gl-tooltip",value:{placement:"left",boundary:"viewport"},expression:"{ placement: 'left', boundary: 'viewport' }"}],ref:"link",tag:"component",staticClass:"tree-item-link str-truncated",class:{"is-submodule":e.isSubmodule},attrs:{title:e.fullPath,to:e.routerLinkTo,href:e.url,"data-qa-selector":"file_name_link"}},[n("file-icon",{staticClass:"mr-1 position-relative text-secondary",attrs:{"file-name":e.fullPath,"file-mode":e.mode,folder:e.isFolder,submodule:e.isSubmodule,loading:e.path===e.loadingPath,"css-classes":"position-relative file-icon"}}),n("span",{staticClass:"position-relative"},[e._v(e._s(e.fullPath))])],1),e._v(" "),e.lfsOid?n("gl-badge",{staticClass:"ml-1",attrs:{variant:"muted",size:"sm","data-testid":"label-lfs"}},[e._v("LFS")]):e._e(),e._v(" "),e.isSubmodule?[e._v("\n      @ "),n("gl-link",{staticClass:"commit-sha",attrs:{href:e.submoduleTreeUrl}},[e._v(e._s(e.shortSha))])]:e._e(),e._v(" "),e.hasLockLabel?n("gl-icon",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"ml-1",attrs:{title:e.commitData.lockLabel,name:"lock",size:12}}):e._e()],2),e._v(" "),n("td",{staticClass:"d-none d-sm-table-cell tree-commit cursor-default gl-text-secondary"},[e.commitData?n("gl-link",{directives:[{name:"safe-html",rawName:"v-safe-html:[$options.safeHtmlConfig]",value:e.commitData.titleHtml,expression:"commitData.titleHtml",arg:e.$options.safeHtmlConfig}],staticClass:"str-truncated-100 tree-commit-link gl-text-secondary",attrs:{href:e.commitData.commitPath,title:e.commitData.message}}):e._e(),e._v(" "),n("gl-intersection-observer",{on:{appear:e.rowAppeared,disappear:e.rowDisappeared}},[e.showSkeletonLoader?n("gl-skeleton-loader",{attrs:{lines:1}}):e._e()],1)],1),e._v(" "),n("td",{staticClass:"tree-time-ago text-right cursor-default gl-text-secondary"},[e.commitData?n("timeago-tooltip",{attrs:{time:e.commitData.committedDate}}):e._e(),e._v(" "),e.showSkeletonLoader?n("gl-skeleton-loader",{attrs:{lines:1}}):e._e()],1)])}),[],!1,null,null,null).exports,se={components:{GlSkeletonLoader:G.a,TableHeader:H,TableRow:oe,ParentRow:J,GlButton:U.a},mixins:[b.a],apollo:{projectPath:{query:y.a}},props:{commits:{type:Array,required:!1,default:function(){return[]}},path:{type:String,required:!0},entries:{type:Object,required:!1,default:function(){return{}}},isLoading:{type:Boolean,required:!0},loadingPath:{type:String,required:!1,default:""},hasMore:{type:Boolean,required:!0}},data:()=>({projectPath:"",rowNumbers:{}}),computed:{totalEntries(){return Object.values(this.entries).flat().length},tableCaption(){return this.isLoading?Object(M.h)(Object(M.a)("Loading files, directories, and submodules in the path %{path} for commit reference %{ref}"),{path:this.path,ref:this.ref}):Object(M.h)(Object(M.a)("Files, directories, and submodules in the path %{path} for commit reference %{ref}"),{path:this.path,ref:this.ref})},showParentRow(){return-1===["","/"].indexOf(this.path)}},watch:{$route:function(){this.$options.totalRowsLoaded=-1}},totalRowsLoaded:-1,methods:{showMore(){this.$emit("showMore")},generateRowNumber(e,t,n){const i=`${e}-${t}-${n}`;return this.rowNumbers[i]||0===this.rowNumbers[i]||(this.$options.totalRowsLoaded+=1,this.rowNumbers[i]=this.$options.totalRowsLoaded),this.rowNumbers[i]},getCommit(e){var t=this;return this.commits.find((function(n){return n.filePath===Object(s.y)(t.path,e)}))}}},le=Object(u.a)(se,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tree-content-holder"},[n("div",{staticClass:"table-holder bordered-box"},[n("table",{staticClass:"table tree-table",class:{"gl-table-layout-fixed":!e.showParentRow},attrs:{"aria-label":e.tableCaption,"aria-live":"polite","data-qa-selector":"file_tree_table"}},[e._m(0),e._v(" "),n("tbody",[e.showParentRow?n("parent-row",{attrs:{"commit-ref":e.escapedRef,path:e.path,"loading-path":e.loadingPath}}):e._e(),e._v(" "),e._l(e.entries,(function(t){return e._l(t,(function(t,i){return n("table-row",e._g({key:t.flatPath+"-"+t.id+"-"+i,attrs:{id:t.id,sha:t.sha,"project-path":e.projectPath,"current-path":e.path,name:t.name,path:t.flatPath,type:t.type,url:t.webUrl||t.webPath,mode:t.mode,"submodule-tree-url":t.treeUrl,"lfs-oid":t.lfsOid,"loading-path":e.loadingPath,"total-entries":e.totalEntries,"row-number":e.generateRowNumber(t.flatPath,t.id,i),"commit-info":e.getCommit(t.name)}},e.$listeners))}))})),e._v(" "),e.isLoading?e._l(5,(function(t){return n("tr",{key:t,attrs:{"aria-hidden":"true"}},[n("td",[n("gl-skeleton-loader",{attrs:{lines:1}})],1),e._v(" "),n("td",{staticClass:"gl-display-none gl-sm-display-block"},[n("gl-skeleton-loader",{attrs:{lines:1}})],1),e._v(" "),n("td",[n("div",{staticClass:"gl-display-flex gl-lg-justify-content-end"},[n("gl-skeleton-loader",{attrs:{"equal-width-lines":!0,lines:1}})],1)])])})):e._e(),e._v(" "),e.hasMore?[n("tr",[n("td",{staticClass:"gl-p-0!",attrs:{align:"center",colspan:"3"}},[n("gl-button",{staticClass:"gl-display-flex gl-w-full gl-py-4!",attrs:{variant:"link",loading:e.isLoading},on:{click:e.showMore}},[e._v("\n                "+e._s(e.s__("ProjectFileTree|Show more"))+"\n              ")])],1)])]:e._e()],2)],1)])])}),[function(){var e=this.$createElement;return(this._self._c||e)("table-header")}],!1,null,null,null).exports,de={i18n:d.v,components:{FileTable:le,FilePreview:B},mixins:[b.a,Object(g.a)()],apollo:{projectPath:{query:y.a}},props:{path:{type:String,required:!1,default:"/"},loadingPath:{type:String,required:!1,default:""}},data:()=>({commits:[],projectPath:"",nextPageCursor:"",pagesLoaded:1,entries:{trees:[],submodules:[],blobs:[]},isLoadingFiles:!1,isOverLimit:!1,clickedShowMore:!1,fetchCounter:0}),computed:{pageSize(){const e=d.u/d.s*(this.fetchCounter+1);return e<d.u&&this.glFeatures.increasePageSizeExponentially?e:d.u},totalEntries(){return Object.values(this.entries).flat().length},readme(){return(e=this.entries.blobs).find(w)||e.find(N);var e},pageLimitReached(){return this.totalEntries/this.pagesLoaded>=d.t},hasShowMore(){return!this.clickedShowMore&&this.pageLimitReached}},watch:{$route:function(){this.entries.trees=[],this.entries.submodules=[],this.entries.blobs=[],this.nextPageCursor="",F(),this.fetchFiles()}},mounted(){var e=this;this.$nextTick((function(){F(),e.fetchFiles()}))},methods:{fetchFiles(){var e=this;const t=this.path||"/";return this.isLoadingFiles=!0,this.$apollo.query({query:f.a,variables:{projectPath:this.projectPath,ref:this.ref,path:t,nextPageCursor:this.nextPageCursor,pageSize:this.pageSize}}).then((function(n){var i;let{data:a}=n;if(a.errors)throw a.errors;if(null==a||null===(i=a.project)||void 0===i||!i.repository||t!==(e.path||"/"))return;const{project:{repository:{paginatedTree:{pageInfo:r}}}}=a;e.isLoadingFiles=!1,e.entries=Object.keys(e.entries).reduce((function(t,n){return{...t,[n]:e.normalizeData(n,a.project.repository.paginatedTree.nodes[0][n])}}),{}),null!=r&&r.hasNextPage&&(e.nextPageCursor=r.endCursor,e.fetchCounter+=1,e.pageLimitReached&&!e.clickedShowMore||(e.fetchFiles(),e.clickedShowMore=!1))})).catch((function(t){let n;t.graphQLErrors&&(n=t.graphQLErrors.find((function(e){var t;return(null==e||null===(t=e.extensions)||void 0===t?void 0:t.code)===d.f})));const i=n?e.$options.i18n.gitalyError:e.$options.i18n.generalError;Object(v.createAlert)({message:i,captureError:!0})}))},normalizeData(e,t){return this.entries[e].concat(t.nodes)},hasNextPage:e=>[].concat(e.trees.pageInfo,e.submodules.pageInfo,e.blobs.pageInfo).find((function(e){let{hasNextPage:t}=e;return t})),handleRowAppear(e){x(e)||(this.loadCommitData(e),e-d.a>=0&&this.loadCommitData(e-d.a))},loadCommitData(e){O(this.projectPath,this.path,this.ref,e).then(this.setCommitData).catch((function(){}))},setCommitData(e){this.commits=this.commits.concat(e)},handleShowMore(){this.clickedShowMore=!0,this.pagesLoaded+=1,this.fetchFiles()}}},ce={components:{TreeContent:Object(u.a)(de,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("file-table",{attrs:{path:e.path,entries:e.entries,"is-loading":e.isLoadingFiles,"loading-path":e.loadingPath,"has-more":e.hasShowMore,commits:e.commits},on:{showMore:e.handleShowMore,"row-appear":e.handleRowAppear}}),e._v(" "),e.readme?n("file-preview",{attrs:{blob:e.readme}}):e._e()],1)}),[],!1,null,null,null).exports},mixins:[{mixins:[b.a],apollo:{projectPath:{query:y.a}},data:()=>({projectPath:"",loadingPath:null}),beforeRouteUpdate(e,t,n){this.preload(e.params.path,n)},methods:{preload(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1?arguments[1]:void 0;return this.loadingPath=e.replace(/^\//,""),this.$apollo.query({query:f.a,variables:{projectPath:this.projectPath,ref:this.ref,path:this.loadingPath,nextPageCursor:"",pageSize:100}}).then((function(){return t()}))}}}],props:{path:{type:String,required:!1,default:"/"}},computed:{isRoot(){return"/"===this.path}},watch:{isRoot:{immediate:!0,handler:"updateElements"}},methods:{updateElements(e){Object(p.a)(".js-show-on-root",e),Object(p.a)(".js-hide-on-root",!e)}}},ue=Object(u.a)(ce,(function(){var e=this.$createElement;return(this._self._c||e)("tree-content",{attrs:{path:this.path,"loading-path":this.loadingPath}})}),[],!1,null,null,null).exports,me={components:{TreePage:ue},mounted(){this.updateProjectElements(!0)},beforeDestroy(){this.updateProjectElements(!1)},methods:{updateProjectElements(e){Object(p.a)(".js-show-on-project-root",e)}}},pe=Object(u.a)(me,(function(){var e=this.$createElement;return(this._self._c||e)("tree-page",{attrs:{path:"/"}})}),[],!1,null,null,null).exports;function he(e,t){const n={component:ue,props:function(e){var t;return{path:(null===(t=e.params.path)||void 0===t?void 0:t.replace(/^\//,""))||"/"}}},i={component:m,props:function(t){return{path:t.params.path,projectPath:e}}},r=new o.a({mode:"history",base:Object(s.y)(gon.relative_url_root||"",e),routes:[{name:"treePathDecoded",path:`(/-)?/tree/${decodeURI(t)}/:path*`,...n},{name:"treePath",path:`(/-)?/tree/${a()(t)}/:path*`,...n},{name:"blobPathDecoded",path:`(/-)?/blob/${decodeURI(t)}/:path*`,...i},{name:"blobPath",path:`(/-)?/blob/${a()(t)}/:path*`,...i},{path:"/",name:"projectRoot",component:pe}]});return r.afterEach((function(n){const i=!n.name.includes("blobPath");window.gl.webIDEPath=Object(s.R)(Object(s.y)("/",e,"edit",decodeURI(t),"-",n.params.path||"",i&&"/"))})),r}r.default.use(o.a)},hyA4:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"TreeEntry"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Entry"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sha"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"flatPath"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getPaginatedTree"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"projectPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"path"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"ref"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"nextPageCursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"project"},arguments:[{kind:"Argument",name:{kind:"Name",value:"fullPath"},value:{kind:"Variable",name:{kind:"Name",value:"projectPath"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"paginatedTree"},arguments:[{kind:"Argument",name:{kind:"Name",value:"path"},value:{kind:"Variable",name:{kind:"Name",value:"path"}}},{kind:"Argument",name:{kind:"Name",value:"ref"},value:{kind:"Variable",name:{kind:"Name",value:"ref"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"nextPageCursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"startCursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"trees"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"TreeEntry"},directives:[]},{kind:"Field",name:{kind:"Name",value:"webPath"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"submodules"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"TreeEntry"},directives:[]},{kind:"Field",name:{kind:"Name",value:"webUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"treeUrl"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"blobs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"TreeEntry"},directives:[]},{kind:"Field",name:{kind:"Name",value:"mode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"webPath"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lfsOid"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:1017}};n.loc.source={body:"fragment TreeEntry on Entry {\n  __typename\n  id\n  sha\n  name\n  flatPath\n  type\n}\n\nquery getPaginatedTree($projectPath: ID!, $path: String, $ref: String!, $nextPageCursor: String) {\n  project(fullPath: $projectPath) {\n    id\n    __typename\n    repository {\n      __typename\n      paginatedTree(path: $path, ref: $ref, after: $nextPageCursor) {\n        __typename\n        pageInfo {\n          __typename\n          endCursor\n          startCursor\n          hasNextPage\n        }\n        nodes {\n          __typename\n          trees {\n            __typename\n            nodes {\n              ...TreeEntry\n              webPath\n            }\n          }\n          submodules {\n            __typename\n            nodes {\n              ...TreeEntry\n              webUrl\n              treeUrl\n            }\n          }\n          blobs {\n            __typename\n            nodes {\n              ...TreeEntry\n              mode\n              webPath\n              lfsOid\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}function r(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.TreeEntry=r(n,"TreeEntry"),e.exports.getPaginatedTree=r(n,"getPaginatedTree")},qINL:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n("UVyR"),a=n("ryFn"),r=n("qx9o"),o=n("BhOj"),s=n("G55H"),l=n("9Q7u"),d="__bv_modal_directive__",c=function(e){var t=e.modifiers,n=void 0===t?{}:t,i=e.arg,a=e.value;return Object(s.m)(a)?a:Object(s.m)(i)?i:Object(l.h)(n).reverse()[0]},u=function(e){return e&&Object(r.v)(e,".dropdown-menu > li, li.nav-item")&&Object(r.C)("a, button",e)||e},m=function(e){e&&"BUTTON"!==e.tagName&&(Object(r.o)(e,"role")||Object(r.E)(e,"role","button"),"A"===e.tagName||Object(r.o)(e,"tabindex")||Object(r.E)(e,"tabindex","0"))},p=function(e){var t=e[d]||{},n=t.trigger,a=t.handler;n&&a&&(Object(o.a)(n,"click",a,i.b),Object(o.a)(n,"keydown",a,i.b),Object(o.a)(e,"click",a,i.b),Object(o.a)(e,"keydown",a,i.b)),delete e[d]},h=function(e,t,n){var s=e[d]||{},l=c(t),h=u(e);l===s.target&&h===s.trigger||(p(e),function(e,t,n){var s=c(t),l=u(e);if(s&&l){var p=function(e){var t=e.currentTarget;if(!Object(r.r)(t)){var i=e.type,o=e.keyCode;"click"!==i&&("keydown"!==i||o!==a.c&&o!==a.h)||n.context.$root.$emit("bv::show::modal",s,t)}};e[d]={handler:p,target:s,trigger:l},m(l),Object(o.b)(l,"click",p,i.b),"BUTTON"!==l.tagName&&"button"===Object(r.h)(l,"role")&&Object(o.b)(l,"keydown",p,i.b)}}(e,t,n)),m(h)},f={inserted:h,updated:function(){},componentUpdated:h,unbind:p}},wd1e:function(e,t,n){"use strict";function i(e,t){for(var n=[],i={},a=0;a<t.length;a++){var r=t[a],o=r[0],s={id:e+":"+a,css:r[1],media:r[2],sourceMap:r[3]};i[o]?i[o].parts.push(s):n.push(i[o]={id:o,parts:[s]})}return n}n.r(t),n.d(t,"default",(function(){return p}));var a="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!a)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var r={},o=a&&(document.head||document.getElementsByTagName("head")[0]),s=null,l=0,d=!1,c=function(){},u=null,m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function p(e,t,n,a){d=n,u=a||{};var o=i(e,t);return h(o),function(t){for(var n=[],a=0;a<o.length;a++){var s=o[a];(l=r[s.id]).refs--,n.push(l)}t?h(o=i(e,t)):o=[];for(a=0;a<n.length;a++){var l;if(0===(l=n[a]).refs){for(var d=0;d<l.parts.length;d++)l.parts[d]();delete r[l.id]}}}}function h(e){for(var t=0;t<e.length;t++){var n=e[t],i=r[n.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](n.parts[a]);for(;a<n.parts.length;a++)i.parts.push(v(n.parts[a]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{var o=[];for(a=0;a<n.parts.length;a++)o.push(v(n.parts[a]));r[n.id]={id:n.id,refs:1,parts:o}}}}function f(){var e=document.createElement("style");return e.type="text/css",o.appendChild(e),e}function v(e){var t,n,i=document.querySelector('style[data-vue-ssr-id~="'+e.id+'"]');if(i){if(d)return c;i.parentNode.removeChild(i)}if(m){var a=l++;i=s||(s=f()),t=k.bind(null,i,a,!1),n=k.bind(null,i,a,!0)}else i=f(),t=y.bind(null,i),n=function(){i.parentNode.removeChild(i)};return t(e),function(i){if(i){if(i.css===e.css&&i.media===e.media&&i.sourceMap===e.sourceMap)return;t(e=i)}else n()}}var g,b=(g=[],function(e,t){return g[e]=t,g.filter(Boolean).join("\n")});function k(e,t,n,i){var a=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=b(t,a);else{var r=document.createTextNode(a),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(r,o[t]):e.appendChild(r)}}function y(e,t){var n=t.css,i=t.media,a=t.sourceMap;if(i&&e.setAttribute("media",i),u.ssrId&&e.setAttribute("data-vue-ssr-id",t.id),a&&(n+="\n/*# sourceURL="+a.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}}}]);
//# sourceMappingURL=commons-pages.projects.show-pages.projects.tree.show.d472cbd9.chunk.js.map